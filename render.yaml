services:
  - type: web
    name: mt5-simulator
    runtime: python39
    buildCommand: |
      python --version
      pip install --upgrade pip
      pip install --prefer-binary fastapi==0.104.1 uvicorn[standard]==0.24.0 sqlalchemy==2.0.23 pydantic==2.5.2
      pip install --prefer-binary python-multipart==0.0.6 python-dotenv==1.0.0 aiofiles==23.2.1 python-dateutil==2.8.2 pytz==2023.3 numpy==1.26.2 alembic==1.12.1
      pip install --prefer-binary gunicorn==20.1.0
      pip install --prefer-binary cryptography==3.4.8 python-jose==3.3.0 websockets==10.4
    postBuildCommand: mkdir -p static && cp fetchingAPI.html static/index.html || true
    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: RENDER
        value: "true"
    plan: free
    startCommand: python main.py
